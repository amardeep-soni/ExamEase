<div class="study-plan-container">
  <!-- Header with back button and exam name -->
  <div class="top-header">
    <button class="back-button">
      <i class="fas fa-arrow-left"></i>
    </button>
    <h1 class="exam-title">Exam Name {{tasksData.examName}}</h1>
    <div class="header-controls">
      <span class="current-date">{{ formatDate(currentDate) }}</span>
      <span class="exam-date">Exam: {{displayedTasks[0]?.examDate}}</span>
      <button class="view-toggle" (click)="toggleView()">
        <i class="fas fa-th-large"></i>
      </button>
      <button class="calendar-toggle" (click)="toggleView()">
        <i class="far fa-calendar"></i>
      </button>
    </div>
  </div>

  <!-- Calendar View -->
  <div *ngIf="isCalendarView" class="calendar-view">
    <div class="calendar-header">
      <div class="weekday-header" *ngFor="let day of ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']">
        {{day}}
      </div>
    </div>

    <div class="calendar-grid">
      <div class="week" *ngFor="let week of weeks">
        <div class="day" *ngFor="let date of week" 
          [class.has-tasks]="hasTasksForDate(date) > 0"
          [class.selected]="selectedDate && date && selectedDate.getDate() === date.getDate()"
          (click)="date && selectDate(date)">
          <span class="date-number">{{date ? date.getDate() : ''}}</span>
          <span class="task-count" *ngIf="hasTasksForDate(date)">
            {{hasTasksForDate(date)}}
          </span>
        </div>
      </div>
    </div>
    
  </div>

  <!-- List View -->
  <div *ngIf="!isCalendarView" class="list-view">
    <!-- Existing date navigation and tasks display -->
    <div class="date-navigation">
      <button class="nav-button" (click)="goBackward()">
        <i class="fas fa-chevron-left"></i>
      </button>
      <!-- <span class="current-date">{{ formatDate(currentDate) }}</span> -->
      <button class="nav-button" (click)="goForward()">
        <i class="fas fa-chevron-right"></i>
      </button>
    </div>

    <!-- Tasks Display -->
    <div class="tasks-container">
      <div *ngFor="let task of displayedTasks" class="task-item">
        <div class="task-header">
          <h3>{{task.subject}}</h3>
          <span class="card-exam-date">{{task.examDate}}</span>
        </div>
        <p>Time: {{task.time}}</p>
        <p>Topic: {{task.topic}}</p>
      </div>

      <div *ngIf="displayedTasks.length === 0" class="no-tasks">
        No tasks scheduled for this date
      </div>
    </div>
  </div>

</div>